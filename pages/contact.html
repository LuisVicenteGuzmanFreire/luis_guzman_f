<!DOCTYPE html>
<!-- Define el tipo de documento como HTML5 -->

<html lang="es">
<!-- Indica que el idioma principal del contenido es español -->

<head>
    <!-- Inicio de la sección de cabecera, donde se incluyen metadatos y enlaces a recursos externos -->

    <meta charset="UTF-8">
    <!-- Configura la codificación de caracteres a UTF-8 para admitir caracteres especiales -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Asegura que la página sea responsive, adaptándose a diferentes dispositivos -->

    <meta name="robots" content="index, follow">
    <!-- Indica a los motores de búsqueda que esta página debe ser indexada y que sigan los enlaces -->

    <title>Contacto - Luis Vicente Guzmán | Consultas en Geomática y SIG</title>
    <!-- Título optimizado para SEO con palabras clave relevantes -->

    <meta name="description" content="Contáctame para consultas profesionales en geomática, SIG, teledetección y machine learning aplicado a la agricultura. Más de 7 años de experiencia en análisis geoespacial.">

    <meta name="keywords" content="Contacto, Geomática, SIG, Análisis Espacial, Cartografía, Consultoría GIS, Teledetección">



    <!-- ============================ -->
    <!-- Inclusión de hojas de estilo y bibliotecas externas -->
    <!-- ============================ -->
    <link rel="icon" href="../favicon.ico">
    <!-- Bootstrap CSS: Framework para diseño responsivo y componentes estilizados -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <!-- AOS.js CSS: Biblioteca para animaciones al hacer scroll -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">

    <!-- FontAwesome CSS: Biblioteca de iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Google Fonts: Importa tipografías personalizadas -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">

    <!-- Leaflet CSS: Biblioteca para mapas interactivos -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />

    <!-- Hojas de estilo personalizadas -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/dark-mode.css">
    <!-- Se incluye el CSS para el modo oscuro -->
    
</head>

<body>

    
    <!-- Contenido de la página -->
    <!-- Inicio del cuerpo del documento -->

    <!-- Preloader: se muestra mientras se carga el contenido de la página -->
    <div id="preloader">
        <div class="spinner"></div>
        <!-- Spinner animado que indica al usuario que la página se está cargando -->
    </div>
    
    <!-- Contenedor para la barra de navegación -->
    <div id="nav-container"></div>
    <!-- El contenido del navbar se insertará dinámicamente mediante JavaScript (por ejemplo, desde navbar.js) -->

    <!-- Contenedor para breadcrumbs -->
    <div id="breadcrumb-container"></div>
    
    <!-- Contenido principal de la página -->
    <!-- Sección de Contacto y Formulario -->
    <main class="container mt-5">
        <h1 class="display-4" data-aos="fade-up">
            Contacto
        </h1>
        <div class="row align-items-stretch">
            <!-- Información de Contacto -->
            <div class="col-md-6 d-flex align-items-center" data-aos="fade-right">
                <div class="card contact-card shadow-lg p-4 w-100 text-center">
                    <i class="fa-solid fa-user-circle fa-4x text-primary mb-3"></i>
                    <h4 class="mb-3">Luis Vicente Guzmán</h4>
                    
                    <div class="contact-item">
                        <i class="fa-solid fa-phone fa-lg text-success" aria-hidden="true"></i>
                        <span class="visually-hidden">Teléfonos:</span>
                        <a href="tel:+593968189168" class="contact-link" aria-label="Llamar al +593 968189168">+593 968189168</a>
                        <a href="tel:+593967252839" class="contact-link" aria-label="Llamar al +593 967252839">+593 967252839</a>
                    </div>

                    <div class="contact-item">
                        <i class="fa-solid fa-envelope fa-lg text-danger" aria-hidden="true"></i>
                        <span class="visually-hidden">Correo electrónico:</span>
                        <a href="mailto:luisvicente1988@hotmail.com" class="contact-link" aria-label="Enviar correo a luisvicente1988@hotmail.com">luisvicente1988@hotmail.com</a>
                    </div>

                    <div class="contact-item">
                        <i class="fa-brands fa-whatsapp fa-lg text-success" aria-hidden="true"></i>
                        <span class="visually-hidden">WhatsApp:</span>
                        <a href="https://wa.me/593968189168" target="_blank" rel="noopener noreferrer" class="contact-link" aria-label="Enviar mensaje por WhatsApp">WhatsApp</a>
                    </div>

                    <div class="contact-item">
                        <i class="fa-solid fa-map-marker-alt fa-lg text-warning" aria-hidden="true"></i>
                        <span class="visually-hidden">Ubicación:</span>
                        <p class="contact-link">Quito, Ecuador</p>
                    </div>
                </div>
            </div>

            <!-- Formulario de Contacto -->
            <div class="col-md-6 d-flex align-items-center" data-aos="fade-left">
                <div class="card shadow-lg p-4 w-100">
                    <h2 class="text-center mb-3">Envíame un mensaje</h2>
                    <!-- Formulario de Contacto - Método Email Directo -->
                    <form id="contact-form" class="contact-form">
                        <!-- Campo obligatorio: name -->
                        <div class="mb-3">
                            <label for="name" class="form-label">Nombre *</label>
                            <input type="text" class="form-control" name="name" id="name" required placeholder="Tu nombre completo">
                        </div>

                        <!-- Campo obligatorio: email -->
                        <div class="mb-3">
                            <label for="email" class="form-label">Correo Electrónico *</label>
                            <input type="email" class="form-control" name="email" id="email" required placeholder="tu@email.com">
                        </div>

                        <!-- Campo opcional: subject -->
                        <div class="mb-3">
                            <label for="subject" class="form-label">Tipo de Consulta</label>
                            <select class="form-control" name="subject" id="subject">
                                <option value="">Selecciona el tipo de consulta</option>
                                <option value="Servicios SIG y Cartografía">Servicios SIG y Cartografía</option>
                                <option value="Teledetección y Análisis Satelital">Teledetección y Análisis Satelital</option>
                                <option value="Machine Learning Agrícola">Machine Learning Agrícola</option>
                                <option value="Consultoría en Geomática">Consultoría en Geomática</option>
                                <option value="Proyecto Personalizado">Proyecto Personalizado</option>
                                <option value="Consulta General">Consulta General</option>
                            </select>
                        </div>

                        <!-- Campo obligatorio: message -->
                        <div class="mb-3">
                            <label for="message" class="form-label">Mensaje *</label>
                            <textarea class="form-control" name="message" id="message" rows="5" required placeholder="Describe tu consulta o proyecto en geomática, SIG o agricultura de precisión..."></textarea>
                        </div>

                        <!-- Botón de envío -->
                        <button type="submit" class="btn btn-primary btn-lg w-100" id="submit-btn">
                            <i class="fas fa-paper-plane" aria-hidden="true"></i> Enviar Mensaje
                        </button>
                        
                        <div class="form-text mt-3 text-center">
                            <small>* Campos obligatorios. Responderé en un plazo máximo de 24 horas.</small>
                        </div>
                    </form>

                    <!-- Mensaje de respuesta del formulario -->
                    <div id="formspree-success" class="alert alert-success mt-3" style="display: none;" role="alert">
                        <i class="fas fa-check-circle" aria-hidden="true"></i> 
                        <strong>¡Tu mensaje ha sido enviado exitosamente!</strong><br>
                        He recibido tu consulta y te contactaré pronto.
                    </div>

                </div>
            </div>
        </div>
        <!-- "container": limita el ancho y centra el contenido; "text-center": centra el texto; "mt-5": margen superior -->


        <!-- Sección del Mapa Interactivo -->
        <section class="container mt-5">
            <!-- Contenedor de la sección del mapa, con margen superior -->
            <h2 class="text-center" data-aos="fade-up">Ubicación</h2>
            <!-- Título de la sección de ubicación, centrado y con animación "fade-up" -->
            <p class="text-center" data-aos="fade-up" data-aos-delay="200">
                Aquí puedes encontrar nuestra ubicación exacta.
            </p>
            <!-- Párrafo descriptivo con animación y retraso de 200ms -->
            <div id="map" class="map-container" data-aos="zoom-in" data-aos-delay="300"></div>
            <!-- Contenedor donde se renderizará el mapa interactivo mediante Leaflet -->
        </section>

    </main>
    <!-- Fin del contenido principal -->

    <!-- Contenedor para el Footer -->
    <div id="footer-container"></div>
    <!-- El contenido del footer se cargará dinámicamente mediante JavaScript (ej. footer.js) -->

    <!-- ============================ -->
    <!-- Inclusión de scripts externos y personalizados -->
    <!-- ============================ -->

    <!-- Bootstrap Bundle (incluye Popper) para funcionalidades interactivas -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- AOS.js para activar animaciones al hacer scroll -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

    <!-- Leaflet JS para la generación del mapa interactivo -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    
    <!-- Script para cargar dinámicamente el mapa (map.js) -->
    <script src="../assets/js/map.js"></script>
   
    <!-- Script para cargar dinámicamente la barra de navegación -->
    <script src="../assets/js/navbar-fixed.js"></script>

    <!-- Script para cargar dinámicamente el pie de página -->
    <script src="../assets/js/footer.js"></script>

    <!-- Archivo JavaScript principal con funcionalidades adicionales -->
    <script src="../assets/js/main.js"></script>

    <!-- Script para manejar el formulario de contacto -->
    <!-- Estilos para el mapa y marcador personalizado -->
    <style>
        .custom-marker {
            background: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .custom-marker i {
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
            transition: all 0.3s ease;
        }
        
        .custom-marker:hover i {
            transform: scale(1.2);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4));
        }
        
        /* Mejorar el popup del mapa */
        .leaflet-popup-content-wrapper {
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        
        .leaflet-popup-tip {
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
    </style>

    <script>
        // Inicializar AOS
        AOS.init();
        
        // Formulario de contacto optimizado - Sistema único sin duplicación
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contact-form');
            const submitBtn = document.getElementById('submit-btn');
            const formspreeSuccess = document.getElementById('formspree-success');
            
            // Verificar que los elementos existen
            if (!form || !submitBtn || !formspreeSuccess) {
                console.warn('⚠️ Elementos del formulario no encontrados');
                return;
            }
            
            // Variable para evitar envíos duplicados
            let isSubmitting = false;
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Evitar envíos duplicados
                if (isSubmitting) {
                    return;
                }
                
                // Validar formulario
                if (!form.checkValidity()) {
                    form.classList.add('was-validated');
                    return;
                }
                
                isSubmitting = true;
                
                // Cambiar botón a "enviando"
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
                submitBtn.disabled = true;
                
                try {
                    // Recopilar datos del formulario
                    const name = form.name.value.trim();
                    const email = form.email.value.trim();
                    const subject = form.subject.value || 'Consulta General';
                    const message = form.message.value.trim();
                    
                    // Crear contenido del email
                    const emailSubject = `💼 Consulta desde tu portafolio - ${subject}`;
                    const emailBody = `Hola Luis,

Has recibido un nuevo mensaje desde tu portafolio web:

👤 NOMBRE: ${name}
📧 EMAIL: ${email}
📋 TIPO: ${subject}

💬 MENSAJE:
${message}

---
Este mensaje fue enviado desde tu formulario de contacto web.

Para responder, simplemente responde a este email.

Saludos,
Tu Portafolio Web`;
                    
                    // Crear enlace mailto
                    const mailtoLink = `mailto:luisvicente1988@hotmail.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
                    
                    // Abrir cliente de email
                    window.location.href = mailtoLink;
                    
                    // Mostrar mensaje de confirmación (solo una vez)
                    form.style.display = 'none';
                    formspreeSuccess.innerHTML = `
                        <i class="fas fa-envelope-open" aria-hidden="true"></i> 
                        <strong>¡Abriendo tu cliente de email!</strong><br>
                        Se ha generado un email con tu mensaje. Solo tienes que hacer clic en "Enviar" en tu programa de email.
                        <hr>
                        <div class="d-grid gap-2">
                            <button class="btn btn-success" onclick="window.open('https://wa.me/593968189168?text=${encodeURIComponent('Hola Luis, me interesa contactarte sobre: ' + subject)}', '_blank')">
                                <i class="fas fa-whatsapp"></i> O enviar por WhatsApp
                            </button>
                            <button class="btn btn-outline-secondary" onclick="location.reload()">
                                <i class="fas fa-redo"></i> Enviar otro mensaje
                            </button>
                        </div>
                    `;
                    formspreeSuccess.style.display = 'block';
                    formspreeSuccess.scrollIntoView({ behavior: 'smooth' });
                    
                    // Limpiar formulario
                    form.reset();
                    form.classList.remove('was-validated');
                    
                } catch (error) {
                    console.error('Error al procesar el formulario:', error);
                    
                    // Mostrar mensaje de error
                    formspreeSuccess.innerHTML = `
                        <i class="fas fa-exclamation-triangle text-warning"></i> 
                        <strong>Ups, algo salió mal</strong><br>
                        Por favor, intenta contactarme directamente por WhatsApp o email.
                        <hr>
                        <div class="d-grid gap-2">
                            <a href="https://wa.me/593968189168" class="btn btn-success" target="_blank">
                                <i class="fas fa-whatsapp"></i> WhatsApp
                            </a>
                            <a href="mailto:luisvicente1988@hotmail.com" class="btn btn-outline-primary">
                                <i class="fas fa-envelope"></i> Email directo
                            </a>
                        </div>
                    `;
                    formspreeSuccess.style.display = 'block';
                    
                } finally {
                    // Restaurar botón
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    isSubmitting = false;
                }
            });
            
            // Limpiar validación en tiempo real
            const inputs = form.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.checkValidity()) {
                        this.classList.remove('is-invalid');
                        this.classList.add('is-valid');
                    } else {
                        this.classList.remove('is-valid');
                    }
                });
            });
        });
    </script>

</body>
</html>
